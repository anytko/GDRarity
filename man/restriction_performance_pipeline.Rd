% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/restriction_performance.r
\name{restriction_performance_pipeline}
\alias{restriction_performance_pipeline}
\title{Run Full Restriction Performance Pipeline}
\usage{
restriction_performance_pipeline(
  species_df,
  abundance_df,
  trait_cols = c("SLA", "height", "seed_mass"),
  geo_methods = c("taxonomic", "range"),
  fun_methods = c("min_distance", "mean_distance"),
  abundances = c(TRUE, FALSE),
  threshold_sets = list(list(GR = 0.15, GL = 0.15, FR = 0.9, FL = 0.9, PR = 0.75, PL =
    0.75), list(GR = 0.15, GL = 0.15, FR = 0.75, FL = 0.75, PR = 0.75, PL = 0.75),
    list(GR = 0.15, GL = 0.15, FR = 0.9, FL = 0.9, PR = 0.9, PL = 0.9), list(GR = 0.15,
    GL = 0.15, FR = 0.9, FL = 0.9, PR = 0.75, PL = 0.75)),
  direction_sets = list(list(GR = "low", GL = "low", FR = "high", FL = "high", PR =
    "high", PL = "high"), list(GR = "low", GL = "low", FR = "high", FL = "high", PR =
    "high", PL = "high"), list(GR = "low", GL = "low", FR = "high", FL = "high", PR =
    "high", PL = "high"), list(GR = "low", GL = "low", FR = "high", FL = "high", PR =
    "high", PL = "high")),
  species_col = "species",
  response_vars = c("range_diff", "flowering_duration"),
  use_internal_phylo = TRUE,
  internal_phylo_name = "ALLMB",
  phylo = NULL,
  k_means = FALSE,
  additional_dimensions = NULL,
  model = NULL,
  use_phylolm = FALSE,
  phylolm_model = "BM",
  verbose = TRUE
)
}
\arguments{
\item{species_df}{Data frame of species trait and metadata.}

\item{abundance_df}{Data frame of species-by-site abundance data. Must contain columns 'species', 'site', 'presence_absence', and 'abundance'.}

\item{trait_cols}{Character vector of trait column names to use.}

\item{geo_methods}{Method to calculate geographic rarity. Options: \code{"taxonomic"} (based on site occupancy), or \code{"range"} (based on convex hull/range size). Default is \code{"taxonomic"}.}

\item{fun_methods}{Method for functional rarity. Options: \code{"min_distance"}, \code{"mean_distance"}, or \code{"none"} to exclude functional rarity. Default is \code{"min_distance"}.}

\item{abundances}{Logical; if \code{TRUE}, include abundance weighting when calculating community rarity metrics. Default is \code{TRUE}.}

\item{threshold_sets}{List of threshold sets for rarity classification. Must be a list of list.}

\item{direction_sets}{List of direction sets ("high"/"low") corresponding to threshold sets. Must be a list of list.}

\item{species_col}{Name of species column in species_df.}

\item{response_vars}{Character vector of response variables for ANOVA testing.}

\item{use_internal_phylo}{Logical to use internal seed plant phylogeny.}

\item{internal_phylo_name}{Name of the internal seed plant phylogeny to use if applicable. Default: "ALLMB". Options: "ALLMB", "ALLOTB", "GBMB", "GBOTB".}

\item{phylo}{An optional phylogenetic tree of class \code{phylo}. If provided and \code{use_internal_phylo} is \code{FALSE}, this tree will be used for phylogenetic rarity calculations.}

\item{k_means}{Logical, whether to use k-means clustering.}

\item{additional_dimensions}{Optional list of additional custom rarity axes to include in the analysis.}

\item{model}{Optional specified restriction to pass through.}

\item{use_phylolm}{Logical; if \code{TRUE}, fits phylogenetic linear models with
\code{\link[phylolm]{phylolm}}. If \code{FALSE}, fits standard linear models with \code{lm}.}

\item{phylolm_model}{Character string specifying the model type to pass to \code{phylolm},
e.g. \code{"BM"} (Brownian motion).}

\item{verbose}{Logical to print progress. Default is \code{TRUE}.}
}
\value{
A list containing:
\itemize{
\item combos: Output list from \code{run_all_gdrare_combos()}.
\item anova_results: Data frame of combined ANOVA results.
\item best_models: Data frame of best method selected per restriction and response variable.
}
}
\description{
Runs the full pipeline of generating gdrare combos, evaluating restriction performance through ANOVA, and summarizing the best performing methods using AIC.
}
