<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Prepare Restrictions for the Global Model of Discretized Rarity — prepare_gdrarity_models • GDRarity</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare Restrictions for the Global Model of Discretized Rarity — prepare_gdrarity_models"><meta name="description" content="This function assesses available data for a given set of species and determines which rarity dimensions and corresponding restrictions can be used to analyze multidimensional rarity. It also supports automated model selection based on data completeness."><meta property="og:description" content="This function assesses available data for a given set of species and determines which rarity dimensions and corresponding restrictions can be used to analyze multidimensional rarity. It also supports automated model selection based on data completeness."><meta property="og:image" content="https://anytko.github.io/GDRarity/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GDRarity</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/GDRarity.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Prepare Restrictions for the Global Model of Discretized Rarity</h1>

      <div class="d-none name"><code>prepare_gdrarity_models.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function assesses available data for a given set of species and determines which rarity dimensions and corresponding restrictions can be used to analyze multidimensional rarity. It also supports automated model selection based on data completeness.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare_gdrarity_models</span><span class="op">(</span></span>
<span>  <span class="va">species_df</span>,</span>
<span>  abundance_df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  phylo <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use_internal_phylo <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  internal_phylo_name <span class="op">=</span> <span class="st">"ALLMB"</span>,</span>
<span>  trait_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  species_col <span class="op">=</span> <span class="st">"species"</span>,</span>
<span>  use_most_complete_model <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  additional_dimensions <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-species-df">species_df<a class="anchor" aria-label="anchor" href="#arg-species-df"></a></dt>
<dd><p>A data frame with at least one column identifying species (default column name is <code>"species"</code>).</p></dd>


<dt id="arg-abundance-df">abundance_df<a class="anchor" aria-label="anchor" href="#arg-abundance-df"></a></dt>
<dd><p>Optional data frame with abundance data. Must contain columns <code>"species"</code>, <code>"site"</code>, and <code>"abundance"</code> if provided.</p></dd>


<dt id="arg-phylo">phylo<a class="anchor" aria-label="anchor" href="#arg-phylo"></a></dt>
<dd><p>Optional <code>phylo</code> object representing a phylogenetic tree. If not provided, an internal tree can be used.</p></dd>


<dt id="arg-use-internal-phylo">use_internal_phylo<a class="anchor" aria-label="anchor" href="#arg-use-internal-phylo"></a></dt>
<dd><p>Logical; if <code>TRUE</code> (default) and no <code>phylo</code> is provided, the function will attempt to retrieve an internal seed plant phylogeny.</p></dd>


<dt id="arg-internal-phylo-name">internal_phylo_name<a class="anchor" aria-label="anchor" href="#arg-internal-phylo-name"></a></dt>
<dd><p>Character; name of the internal tree to use (e.g., <code>"ALLMB"</code>).</p></dd>


<dt id="arg-trait-cols">trait_cols<a class="anchor" aria-label="anchor" href="#arg-trait-cols"></a></dt>
<dd><p>Optional character vector specifying the names of trait columns in <code>species_df</code>.</p></dd>


<dt id="arg-species-col">species_col<a class="anchor" aria-label="anchor" href="#arg-species-col"></a></dt>
<dd><p>Character; the name of the column in <code>species_df</code> that contains species names (default <code>"species"</code>).</p></dd>


<dt id="arg-use-most-complete-model">use_most_complete_model<a class="anchor" aria-label="anchor" href="#arg-use-most-complete-model"></a></dt>
<dd><p>Logical; if <code>TRUE</code>, returns only the most complete model available.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>Optional character vector of specific model codes to restrict the output to. If specified, only these models are returned (if valid). Restrictions are named using rarity dimensions in the following order: geographic (G), functional (F), and phylogenetic (P) at regional (R) and local (L) scales; to run the full global model the code is GRGLFRFLPRPL.</p></dd>


<dt id="arg-additional-dimensions">additional_dimensions<a class="anchor" aria-label="anchor" href="#arg-additional-dimensions"></a></dt>
<dd><p>Optional character vector of additional column names in <code>species_df</code> to treat as rarity dimensions (e.g., <code>"HabitatType"</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An (invisible) list with the following components:</p><dl><dt>species_df</dt>
<dd><p>The processed species data frame.</p></dd>

<dt>abundance_df</dt>
<dd><p>The original abundance data frame if provided.</p></dd>

<dt>trait_cols</dt>
<dd><p>The trait column names, if traits were available.</p></dd>

<dt>phylo</dt>
<dd><p>The pruned phylogenetic tree used, or <code>NULL</code> if none available.</p></dd>

<dt>available_axes</dt>
<dd><p>Character vector of available rarity axes (e.g., <code>"GR"</code>, <code>"FR"</code>).</p></dd>

<dt>models_to_run</dt>
<dd><p>Character vector of restrictions to use based on input data.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function checks for availability of different rarity dimensions:</p><ul><li><p><code>"GR"</code>: Geographic restriction (always available if species list exists).</p></li>
<li><p><code>"GL"</code>: Geographic local abundance (requires <code>abundance_df</code>).</p></li>
<li><p><code>"FR"</code>: Functional restriction (requires trait data).</p></li>
<li><p><code>"FL"</code>: Functional local abundance (requires trait and abundance data).</p></li>
<li><p><code>"PR"</code>: Phylogenetic restriction (requires a phylogeny).</p></li>
<li><p><code>"PL"</code>: Phylogenetic local abundance (requires a phylogeny).</p></li>
</ul><p>Additional rarity dimensions can be provided. The function  constructs valid model codes (e.g., <code>"GRFR"</code>, <code>"GRGLFRFL"</code>, etc.) based on combinations
of available axes.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="get_phy_angio.html">get_phy_angio()</a></code> for retrieving internal phylogenies.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">species_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Abies_procera"</span>, <span class="st">"Alnus_incana"</span><span class="op">)</span>, trait1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">3.4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">abundance_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Abies_procera"</span>, <span class="st">"Alnus_incana"</span><span class="op">)</span>, site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"A"</span><span class="op">)</span>, abundance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">setup</span> <span class="op">&lt;-</span> <span class="fu">prepare_gdrarity_models</span><span class="op">(</span></span></span>
<span class="r-in"><span>  species_df <span class="op">=</span> <span class="va">species_df</span>,</span></span>
<span class="r-in"><span>  abundance_df <span class="op">=</span> <span class="va">abundance_df</span>,</span></span>
<span class="r-in"><span>  trait_cols <span class="op">=</span> <span class="st">"trait1"</span>,</span></span>
<span class="r-in"><span>  use_internal_phylo <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  internal_phylo_name <span class="op">=</span> <span class="st">"ALLMB"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">setup</span><span class="op">$</span><span class="va">models_to_run</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Alivia Nytko.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

